1.Dify連携部分のsanpleプログラム実装（API仕様、ワークフローDSLを知識としてインプット）
　・提案生成（dify_recommendreq_sample.py）
　・質問応答（dify_qa_sample.py）


2.要件定義から基本設計を作成
（プロンプト）
あなたはエンジニア向けのMVP基本設計を担当する優秀なシステムアーキテクトです。ユーザーが貼り付ける要件定義をもとに、以下の項目を構造化して出力してください。
1. 主要画面構成  
   - 画面名／役割  
   - 主なUIコンポーネント（入力欄、ボタン、リストなど）  
2. 機能一覧＋ユーザーストーリー  
   - 機能A：As a 〇〇, I want 〇〇, so that 〇〇  
3. データモデル概要  
   - エンティティ名と主要属性  
   - リレーションシップ（1対多、多対多など）  
4. 技術スタック提案  
   - フロントエンド、バックエンド、DB、ホスティング、CI/CD  
6. APIエンドポイント一覧  
   - HTTPメソッド、パス、リクエスト／レスポンス例  

3. 要件定義書と基本設計書からデザイン（HTML/CSS/JS）を作成
（プロンプト）
あなたはUIコンポーネント設計に精通したフロントエンドエンジニアです。以下の要件定義と基本設計をもとに、コンポーネント単位で構造化されたHTML/CSS/JavaScriptを生成してください。
【要件定義】
@要件定義書.md
【基本設計】
@基本設計書.md
■ 出力イメージ
1. index.html — ヘッダー／メイン／フッターなどのレイアウト  
2. components/ — 各コンポーネント（例：ナビバー、カード、フォーム）ごとのHTMLと対応するCSS  
3. style.css — 全体のグリッド・レスポンシブ設定  
4. script.js — DOM操作をコンポーネント単位で記述  
desingnフォルダ配下に各ファイルをディレクトリ構造つきでコードブロックに分けて出力してください。


（テストデータ）
柴田 輝夫
・年齢：51歳
・性別：男性
・家族構成：妻と子供2人
・性格：まじめで慎重な性格。保守的。
・職業：一部上場企業会社員	
・役職：課長
・その他：現在マイカーを保有しており乗り換えには消極的だが6か月後に車検の予定がある。
・現在の保有車両：トヨタ プリウス
・ライフスタイル：アウトドア志向
・価値観：安全性、快適性能、ブランド志向、アフターサービスなどの信頼性

下取り10%アップキャンペーン（2025年9月まで）
当店では新車購入から12ヶ月間車両点検無料

残価設定で車を返却する際に傷や不具合があった場合はどうなりますか？



＜＜提案生成API＞＞
■入力形式
{
  "customer_name": "顧客の名前",
  "customer_details": "顧客の詳細情報"
  "customer_type": "提案ステータス",
  "dealer_info": "販売店の強み",
}

（入力サンプル）
{
  "customer_name": "田中雄一",
  "customer_details": "45歳男性、会社経営者。家族構成は妻（42歳）と高校生の息子（16歳）、中学生の娘（13歳）の4人家族。趣味はゴルフとアウトドア。現在の所有車はBMW 5シリーズで購入後5年経過。休日は家族でのドライブや旅行が多く、車内の快適性と走行性能を重視。予算は500〜700万円程度。環境への配慮から次回はハイブリッドまたはEVに興味あり。",
  "customer_type": "商談進行中・2回目来店",
  "dealer_info": "トヨタプレミアムディーラーとして認定。県内最大の試乗車ラインナップを常時20台以上完備。専属メカニックによる納車後10年間の無料点検サービス実施中。11月末までの成約でオプション20万円分プレゼントキャンペーン実施中。EVおよびPHV購入者向け自宅充電設備設置サポート（工事費最大10万円補助）あり。顧客満足度調査3年連続県内1位。"
}

■出力形式
{
  "proposal": {
    "car": {
      "model": "推奨車種",
      "grade": "推奨車種のグレード",
      "price": "推奨車種の価格",
      "reason": "推奨車種の提案理由"
    },
    "payment": {
      "recommended_method": "推奨支払方法",
      "simulation": "支払シミュレーション",
      "reason": "推奨支払方法の提案理由"
    },
    "timing": {
      "recommended_date": "推奨購入時期",
      "reason": "推奨購入時期の理由"
    },
    "trade_in": {
      "recommendation": "下取対象車の有無",
      "assesment": "査定額の目安",
      "reason": "下取推奨の理由"
    }
  }
}


（出力サンプル）
{
  "proposal": {
    "car": {
      "model": "トヨタ ハリアー",
      "grade": "Z“Leather Package” (ハイブリッド)",
      "price": "記載なし",
      "reason": "田中様、前回ご検討のレクサスNX、BMW X3と比べ、ハリアーは上質な内装と静粛性、そしてトヨタならではの信頼性が魅力です。4人家族での利用を考えると、後部座席の居住性やラゲッジスペースの広さも重要ですが、ハリアーはそれらも高いレベルで両立しています。ハイブリッドモデルは、環境性能と経済性を両立し、ゴルフやアウトドアといった趣味にも対応できる十分な走行性能を備えています。さらに、当店の試乗車ラインナップにはハリアーの全グレードをご用意しておりますので、ぜひ乗り比べて、その魅力を体感ください。また、11月末までのご成約でオプション20万円分プレゼントのキャンペーンも実施しており、大変お得です。"
    },
    "payment": {
      "recommended_method": "残価設定型クレジット",
      "simulation": "月々のお支払い額：約70,000円～90,000円 (頭金、ボーナス払い、金利によって変動します) \n下取対応の査定額目安：現在お乗りのお車(BMW 5シリーズ)の年式、走行距離、状態により大きく変動します。実車査定にて詳細な金額をご提示いたします。\n頭金：お客様のご希望に応じて設定可能\nボーナス払い：設定可能\n支払期間：3年、5年など選択可能\n残価：設定可能\n想定される総支払額の目安：詳細はお見積りにてご提示いたします。",
      "reason": "経営者である田中様にとって、キャッシュフローを有効活用し、月々の支払額を抑えつつ、最新のハリアーに乗り続けられる残価設定型クレジットは最適な選択肢です。5年後の残価を設定することで、月々の支払いを抑え、万が一のライフスタイルの変化にも柔軟に対応できます。500〜700万円の予算内で、ハイブリッド車の上位グレードを選択することが可能です。さらに、トヨタプレミアムディーラーである当店では、特別金利をご用意できる可能性もございますので、お気軽にご相談ください。"
    },
    "timing": {
      "recommended_date": "2024年10月",
      "reason": "現在のBMW 5シリーズの車検が近いこと、そして11月末までのキャンペーンを利用できること、さらに、ハリアーは納期が比較的安定していることを考慮すると、2024年10月の購入が最適です。ご家族での旅行シーズンを前に、新しいハリアーで快適なカーライフをスタートできます。また、当店の納車後10年間の無料点検サービスも付帯しますので、安心してお乗りいただけます。"
    },
    "trade_in": {
      "recommendation": "下取り推奨",
      "assesment": "約200万円〜300万円程度が見込まれます。",
      "reason": "5年経過したBMW 5シリーズは、現時点でも高い市場価値を維持しており、下取りに出すことでスムーズな乗り換えが可能です。ディーラーでの下取りは、手続きが簡便であり、新たなハリアーの購入と同時に手続きを進めることができます。また、当社では、BMW車の下取り価格についても、最新の市場動向を踏まえた上で、お客様にご満足いただけるよう最大限の努力をいたします。"
    }
  }
}

＜＜質疑応答API＞＞
■入力形式
{
  "customer_name": "顧客の名前",
  "customer_details": "顧客の詳細情報",
  "customer_type": "提案ステータス",
  "proposal": "顧客への提案内容",
  "sales_question": "営業担当の質問
}

{
  "customer_name": "佐藤健太",
  "customer_details": "40代男性、家族構成：妻、小学4年生と1年生の子供2人。趣味はアウトドア活動で週末は家族でキャンプやハイキングに出かけることが多い。現在の車種：2015年式トヨタカローラフィールダー。",
  "customer_type": "即納車希望",
  "proposal": "ご家族でのアウトドア活動に最適なトヨタ カローラクロスG（価格298万円）をご提案します。広い荷室スペースと高い走行性能で、キャンプ道具の積載やアウトドアフィールドへのアクセスに便利です。11月中のご契約で年内納車が可能で、現在実施中の特別金利1.9%キャンペーンもご利用いただけます。下取り車の査定額は65〜75万円程度を見込んでおります。",
  "sales_question": "カローラクロスの納期について最新情報を教えてください。また、ルーフレールやキャンプ用品の積載に便利なオプションを紹介すべきでしょうか？"
}


■出力形式
{
  "sales_response": {
    "summary": "回答要約",
    "details": "詳細説明",
    "sales_question": "質問内容"
  }
}

（サンプル）
{
  "sales_response": {
    "summary": "カローラクロスの納期は最新情報で確認します。ルーフレールは積載量UPに有効、その他オプションもニーズに応じて提案します。",
    "details": "カローラクロスの納期は、年内納車に向けて販売店と連携し、最新の状況を確認します。ルーフレールは、キャンプ用品などの積載量を増やすのに役立ちます。顧客のライフスタイルや積載する荷物に合わせて、その他のオプション（例：ラゲージトレイ、アクセサリーソケット）を提案し、カーライフをサポートします。下取り車の査定額も高くなるように最大限努力します。",
    "sales_question": "カローラクロスの納期について最新情報を教えてください。また、ルーフレールやキャンプ用品の積載に便利なオプションを紹介すべきでしょうか？"
  }
}


＜＜セールストークAPI＞＞
■入力形式
{
  "customer_name": "顧客の名前",
  "customer_details": "顧客の詳細情報"
  "customer_type": "提案ステータス",
  "proposal": {
    "car": {
      "model": "推奨車種",
      "grade": "推奨車種のグレード",
      "price": "推奨車種の価格",
      "reason": "推奨車種の提案理由"
    },
    "payment": {
      "recommended_method": "推奨支払方法",
      "simulation": "支払シミュレーション",
      "reason": "推奨支払方法の提案理由"
    },
    "timing": {
      "recommended_date": "推奨購入時期",
      "reason": "推奨購入時期の理由"
    },
    "trade_in": {
      "recommendation": "下取対象車の有無",
      "assesment": "査定額の目安",
      "reason": "下取推奨の理由"
    }
  }
}

（サンプル）
{
  "customer_name": "佐藤健一",
  "customer_details": "38歳男性、IT企業勤務。家族構成は妻（35歳）と小学3年生の息子（9歳）、幼稚園年長の娘（6歳）の4人家族。趣味はアウトドアとドライブ。現在所有車はホンダフィット（2015年式）で走行距離89,000km。週末の家族レジャーや日常の送迎に使用。予算は350万円前後で燃費と安全性を重視。",
  "customer_type": "商談進行中・2回目来店",
  "proposal": {
    "car": {
      "model": "トヨタ RAV4",
      "grade": "Adventure",
      "price": "3,538,000円",
      "reason": "佐藤様ご家族のアウトドア活動に最適なSUVとして、RAV4 Adventureをご提案します。アウトドア仕様の専用装備と2.0Lダイナミックフォースエンジン搭載で悪路走行性能に優れ、休日のキャンプやレジャーに適しています。室内空間が広く、お子様の成長にも対応できるサイズ感です。Toyota Safety Sense搭載で家族の安全も確保。さらに荷室容量が先代モデル比20%増となり、アウトドア用品の積載にも余裕があります。"
    },
    "payment": {
      "recommended_method": "残価設定型クレジット（トヨタのりかえスマイルプラン）",
      "simulation": "月々32,000円（ボーナス時70,000円×年2回）、頭金500,000円、支払期間60ヶ月、残価設定1,150,000円、総支払額3,690,000円",
      "reason": "将来の乗り換えを視野に入れた場合、残価設定型クレジットが最適です。通常ローンに比べ月々の支払いが約1万円抑えられ、家計への負担を軽減できます。現在実施中の低金利キャンペーン（1.9%）適用で、通常より総支払額を約15万円削減可能です。また5年後の選択肢（買取・返却・乗換）が自由に選べる柔軟性も魅力です。お子様の成長に合わせて5年後の車種変更も容易にできます。"
    },
    "timing": {
      "recommended_date": "2024年9月",
      "reason": "9月は当店の決算期であり、値引き額が年間で最大（現行モデルで最大15万円）となります。また、RAV4の現在の納期は約2ヶ月であり、9月契約で年内納車が可能です。さらに現在お乗りのフィットは来年2月が車検期限であり、車検費用（約10万円）が不要となるタイミングでもあります。決算期特別低金利キャンペーンと合わせ、経済的にも最も有利な時期といえます。"
    },
    "trade_in": {
      "recommendation": "下取り推奨",
      "assesment": "48万円～55万円",
      "reason": "現在お乗りのフィットは当店での整備履歴があり、状態も良好なため有利な査定額となっています。下取りの場合、9月の決算期特別査定で「プラス5万円キャンペーン」が適用可能です。また名義変更等の手続きも当店で一括対応するため、余計な手間がかかりません。査定額は市場相場と車両状態から48万円～55万円程度と見込んでおり、一般的な買取業者より有利な条件提示が可能です。"
    }
  }
}
